import{o as e,a as m}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{v as j,G as w,l as v,H as y}from"./apiSlice-DJOI_fGg.js";import{B as f,D as k,T as C}from"./Table-D2DAJKLo.js";import{S as I,M as D,a as g}from"./Title-DFBAGnXc.js";import{I as P}from"./Input-BvT8e-b-.js";import{S as A}from"./ScanDialog-iUhfPgzZ.js";function b({value:n,onChange:c,disabled:l=!1}){const{data:{programs:t=[]}={}}=j(),d=a=>{const s=t.find(r=>r.id===a.target.value);if(!s){console.error("Program not found for id:",a.target.value);return}c(s)};return e.jsx(I,{value:n==null?void 0:n.id,label:"Program",onChange:d,disabled:l,children:t.map(a=>e.jsx(D,{value:a.id,children:a.name},a.id))})}const x={fieldsContainer:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},field:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"}};function M({predefinedProgram:n}){const[c,{}]=w(),[l,t]=m.useState(!1),[d,a]=m.useState(""),[s,r]=m.useState(null),o=async()=>{const p=n??s;if(p!==null)try{await c({name:d,programId:p.id}).unwrap()}catch(S){console.error("Failed to add new workspace:",S)}},u=async()=>{await o(),t(!1)},i=async()=>{t(!1)},h=async()=>{t(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(f,{onClick:h,children:"Add Session"}),e.jsx(k,{open:l,setOpen:t,title:"Add Session",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(f,{onClick:u,children:"Save"}),e.jsx(f,{onClick:i,children:"Close"})]}),children:e.jsxs("div",{style:x.fieldsContainer,children:[e.jsxs("div",{style:x.field,children:[e.jsx("div",{children:"Name"}),e.jsx(P,{autoFocus:!0,placeholder:"Enter session name",value:d,onInput:p=>a(p.target.value)})]}),e.jsxs("div",{style:x.field,children:[e.jsx("div",{children:"Program"}),e.jsx(b,{value:n??s,onChange:r,disabled:n!=null})]})]})})]})}function R({sessions:n,programs:c,workspaces:l}){const t=v(),[d,a]=m.useState([]);return m.useEffect(()=>{const s=n.map(r=>{const o=c.find(i=>i.id===r.programId),u=l.find(i=>i.id===(o==null?void 0:o.workspaceId));return{session:r,program:o,workspace:u}});a(s)},[n,c,l]),n.length==0?e.jsx(g,{children:e.jsxs("div",{style:{color:t.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Session"}),e.jsx("div",{children:"Start by adding a session."})]})}):e.jsx(g,{children:e.jsx(C,{data:d,fields:["session","program","workspace","scan"],getId:s=>s.session.id,renderHeader:s=>{switch(s){case"session":return"Session";case"program":return"Program";case"workspace":return"Workspace";case"scan":return"Scan";default:return""}},cellHref:(s,r)=>r!="scan"?y(s.session):void 0,renderCell:(s,r)=>{var o,u;switch(r){case"session":return s.session.name;case"program":return((o=c.find(i=>i.id===s.program.id))==null?void 0:o.name)||"Unknown Program";case"workspace":return((u=l.find(i=>i.id===s.workspace.id))==null?void 0:u.name)||"Unknown Workspace";case"scan":return e.jsx(A,{session:s.session});default:return s.session[r]}}})})}export{M as A,R as S};
