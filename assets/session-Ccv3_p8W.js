import{a as u,o as e,w as f}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{T as p,H as g,A as h}from"./Table-DTl6taO1.js";import{B as x}from"./Breadcrumbs-w5Pnyd4s.js";import{S as j}from"./ScanDialog-BHWPlP9s.js";import{S as l,T as m}from"./Title-LkDUo4Zl.js";import{A as C,e as S,J as w,K as k,E as b}from"./Link-BhbjGcrI.js";import{f as A,D,I as T,a as v}from"./InviteUsersDialog-BVGB0rBM.js";import{L as E}from"./IconLink-DACIwLTy.js";import"./index-OoWrCoTk.js";import"./icons-DNi2LYeE.js";import"./IconButton-BKOyTcTX.js";function I({records:a,invitees:r}){const[i,c]=u.useState(new Map),[s,o]=u.useState([]);return u.useEffect(()=>{const t=new Map;r.forEach(n=>{t.set(n.user.id,n)}),c(t)},[r]),u.useEffect(()=>{o([...a].sort((t,n)=>new Date(n.createdAt).getTime()-new Date(t.createdAt).getTime()))},[a]),e.jsx(p,{data:s,fields:["user","state","createdAt"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"Invitee";case"state":return"State";case"createdAt":return"Created At";default:return""}},renderCell:(t,n)=>{var d;switch(n){case"user":return((d=i.get(t.userId))==null?void 0:d.user.email)||"";case"createdAt":return new Date(t.createdAt).toLocaleString();default:return t[n]}}})}function y({inviteeInsights:a,invitees:r}){const i=C(),c=S();return a.length==0?e.jsx(l,{children:e.jsxs("div",{style:{color:c.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Invitees"}),e.jsx("div",{children:"Start by inviting users."})]})}):e.jsx(l,{children:e.jsx(p,{data:a,fields:["user","badge","earliestCheckin","latestCheckout","duration"],getId:s=>s.user.id,renderHeader:s=>{switch(s){case"user":return"Invitee";case"badge":return"Badge";case"earliestCheckin":return"Earliest Check-in";case"latestCheckout":return"Latest Check-out";case"duration":return"Duration";default:return""}},renderCell:(s,o)=>{const t=r.find(n=>n.user.id===s.user.id);switch(o){case"user":return s.user.email;case"badge":return t?e.jsx(D,{id:t.badge.id,value:i(t.badge.signedValue),displaySize:32}):void 0;case"earliestCheckin":return s.earliestCheckin?new Date(s.earliestCheckin).toLocaleString():"-";case"latestCheckout":return s.latestCheckout?new Date(s.latestCheckout).toLocaleString():"-";case"duration":return A((s.totalDurationSeconds??0)*1e3);default:return s[o]}}})})}function B({sessionId:a}){var o,t;const{data:r=null}=w({sessionId:a,includeParents:!0}),{data:{inviteeInsights:i=[],records:c=[]}={}}=k(a),{data:s=[]}=b(((o=r==null?void 0:r.program)==null?void 0:o.id)||"",{skip:!((t=r==null?void 0:r.program)!=null&&t.id)});return r==null?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(x,{workspace:r.workspace,program:r.program,session:r.session})}),e.jsxs(h,{children:[e.jsx(j,{session:r.session}),e.jsx(T,{program:r.program}),e.jsx(v,{invitees:s})]}),e.jsx(m,{children:"Invitees"}),e.jsx(y,{inviteeInsights:i,invitees:s}),e.jsx(m,{children:"Records"}),e.jsx(I,{records:c,invitees:s})]})}const K=f(function({params:r}){return e.jsx(B,{sessionId:r.sessionId})});export{K as default};
