import{a as P,o as D,A as ee,z as te}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{Q as ie,R as re,e as ae,S as ne,j as se}from"./Link-DkjoWGDy.js";import{B as F,D as Y}from"./Table-KnhGBW8P.js";import{V as oe,I as le,D as he,a as ce}from"./icons-DKx5xfd9.js";import{I as z}from"./IconButton-pxhc0OQH.js";const de="modulepreload",ue=function(R){return"/"+R},G={},fe=function(i,r,o){let l=Promise.resolve();if(r&&r.length>0){let d=function(y){return Promise.all(y.map(m=>Promise.resolve(m).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));l=d(r.map(y=>{if(y=ue(y),y in G)return;G[y]=!0;const m=y.endsWith(".css"),S=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${S}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":de,m||(v.as="script"),v.crossOrigin="",v.href=y,p&&v.setAttribute("nonce",p),document.head.appendChild(v),m)return new Promise((T,e)=>{v.addEventListener("load",T),v.addEventListener("error",()=>e(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return l.then(d=>{for(const h of d||[])h.status==="rejected"&&u(h.reason);return i().catch(u)})};class w{constructor(i,r,o,l,u){this._legacyCanvasSize=w.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=i,this.$canvas=document.createElement("canvas"),o&&typeof o=="object"?this._onDecode=r:(console.warn(o||l||u?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=r),r=typeof o=="object"?o:{},this._onDecodeError=r.onDecodeError||(typeof o=="function"?o:this._onDecodeError),this._calculateScanRegion=r.calculateScanRegion||(typeof l=="function"?l:this._calculateScanRegion),this._preferredCamera=r.preferredCamera||u||this._preferredCamera,this._legacyCanvasSize=typeof o=="number"?o:typeof l=="number"?l:this._legacyCanvasSize,this._maxScansPerSecond=r.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),i.disablePictureInPicture=!0,i.playsInline=!0,i.muted=!0;let d=!1;if(i.hidden&&(i.hidden=!1,d=!0),document.body.contains(i)||(document.body.appendChild(i),d=!0),o=i.parentElement,r.highlightScanRegion||r.highlightCodeOutline){if(l=!!r.overlay,this.$overlay=r.overlay||document.createElement("div"),u=this.$overlay.style,u.position="absolute",u.display="none",u.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!l&&r.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}o.insertBefore(this.$overlay,this.$video.nextSibling)}r.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(i),requestAnimationFrame(()=>{let h=window.getComputedStyle(i);h.display==="none"&&(i.style.setProperty("display","block","important"),d=!0),h.visibility!=="visible"&&(i.style.setProperty("visibility","visible","important"),d=!0),d&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),i.style.opacity="0",i.style.width="0",i.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),i.addEventListener("play",this._onPlay),i.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=w.createQrEngine()}static set WORKER_PATH(i){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await w.listCameras(!1)).length}catch{return!1}}static async listCameras(i=!1){if(!navigator.mediaDevices)return[];let r=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="videoinput"),o;try{i&&(await r()).every(l=>!l.label)&&(o=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await r()).map((l,u)=>({id:l.deviceId,label:l.label||(u===0?"Default Camera":`Camera ${u+1}`)}))}finally{o&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),w._stopVideoStream(o))}}async hasFlash(){let i;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;i=this.$video.srcObject}else i=(await this._getCameraStream()).stream;return"torch"in i.getVideoTracks()[0].getSettings()}catch{return!1}finally{i&&i!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),w._stopVideoStream(i))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(i){throw this._flashOn=!1,i}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),w._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:i,facingMode:r}=await this._getCameraStream();!this._active||this._paused?w._stopVideoStream(i):(this._setVideoMirror(r),this.$video.srcObject=i,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(i){if(!this._paused)throw this._active=!1,i}}stop(){this.pause(),this._active=!1}async pause(i=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let r=()=>{this.$video.srcObject instanceof MediaStream&&(w._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return i?(r(),!0):(await new Promise(o=>setTimeout(o,300)),this._paused?(r(),!0):!1)}async setCamera(i){i!==this._preferredCamera&&(this._preferredCamera=i,await this._restartVideoStream())}static async scanImage(i,r,o,l,u=!1,d=!1){let h,p=!1;r&&("scanRegion"in r||"qrEngine"in r||"canvas"in r||"disallowCanvasResizing"in r||"alsoTryWithoutScanRegion"in r||"returnDetailedScanResult"in r)?(h=r.scanRegion,o=r.qrEngine,l=r.canvas,u=r.disallowCanvasResizing||!1,d=r.alsoTryWithoutScanRegion||!1,p=!0):console.warn(r||o||l||u||d?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),r=!!o;try{let y,m;[o,y]=await Promise.all([o||w.createQrEngine(),w._loadImage(i)]),[l,m]=w._drawToCanvas(y,h,l,u);let S;if(o instanceof Worker){let v=o;r||w._postWorkerMessageSync(v,"inversionMode","both"),S=await new Promise((T,e)=>{let t,s,a,n=-1;s=g=>{g.data.id===n&&(v.removeEventListener("message",s),v.removeEventListener("error",a),clearTimeout(t),g.data.data!==null?T({data:g.data.data,cornerPoints:w._convertPoints(g.data.cornerPoints,h)}):e(w.NO_QR_CODE_FOUND))},a=g=>{v.removeEventListener("message",s),v.removeEventListener("error",a),clearTimeout(t),e("Scanner error: "+(g?g.message||g:"Unknown Error"))},v.addEventListener("message",s),v.addEventListener("error",a),t=setTimeout(()=>a("timeout"),1e4);let c=m.getImageData(0,0,l.width,l.height);n=w._postWorkerMessageSync(v,"decode",c,[c.data.buffer])})}else S=await Promise.race([new Promise((v,T)=>window.setTimeout(()=>T("Scanner error: timeout"),1e4)),(async()=>{try{var[v]=await o.detect(l);if(!v)throw w.NO_QR_CODE_FOUND;return{data:v.rawValue,cornerPoints:w._convertPoints(v.cornerPoints,h)}}catch(T){if(v=T.message||T,/not implemented|service unavailable/.test(v))return w._disableBarcodeDetector=!0,w.scanImage(i,{scanRegion:h,canvas:l,disallowCanvasResizing:u,alsoTryWithoutScanRegion:d});throw`Scanner error: ${v}`}})()]);return p?S:S.data}catch(y){if(!h||!d)throw y;let m=await w.scanImage(i,{qrEngine:o,canvas:l,disallowCanvasResizing:u});return p?m:m.data}finally{r||w._postWorkerMessage(o,"close")}}setGrayscaleWeights(i,r,o,l=!0){w._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:i,green:r,blue:o,useIntegerApproximation:l})}setInversionMode(i){w._postWorkerMessage(this._qrEnginePromise,"inversionMode",i)}static async createQrEngine(i){if(i&&console.warn("Specifying a worker path is not required and not supported anymore."),i=()=>fe(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(o=>o.createWorker()),!(!w._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return i();let r=navigator.userAgentData;return r&&r.brands.some(({brand:o})=>/Chromium/i.test(o))&&/mac ?OS/i.test(r.platform)&&await r.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:o,platformVersion:l})=>/arm/i.test(o||"arm")&&13<=parseInt(l||"13")).catch(()=>!0)?i():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(i){let r=Math.round(.6666666666666666*Math.min(i.videoWidth,i.videoHeight));return{x:Math.round((i.videoWidth-r)/2),y:Math.round((i.videoHeight-r)/2),width:r,height:r,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var i=this.$video,r=i.videoWidth,o=i.videoHeight,l=i.offsetWidth,u=i.offsetHeight,d=i.offsetLeft,h=i.offsetTop,p=window.getComputedStyle(i),y=p.objectFit,m=r/o,S=l/u;switch(y){case"none":var v=r,T=o;break;case"fill":v=l,T=u;break;default:(y==="cover"?m>S:m<S)?(T=u,v=T*m):(v=l,T=v/m),y==="scale-down"&&(v=Math.min(v,r),T=Math.min(T,o))}var[e,t]=p.objectPosition.split(" ").map((a,n)=>{const c=parseFloat(a);return a.endsWith("%")?(n?u-T:l-v)*c/100:c});p=this._scanRegion.width||r,S=this._scanRegion.height||o,y=this._scanRegion.x||0;var s=this._scanRegion.y||0;m=this.$overlay.style,m.width=`${p/r*v}px`,m.height=`${S/o*T}px`,m.top=`${h+t+s/o*T}px`,o=/scaleX\(-1\)/.test(i.style.transform),m.left=`${d+(o?l-e-v:e)+(o?r-y-p:y)/r*v}px`,m.transform=i.style.transform}})}static _convertPoints(i,r){if(!r)return i;let o=r.x||0,l=r.y||0,u=r.width&&r.downScaledWidth?r.width/r.downScaledWidth:1;r=r.height&&r.downScaledHeight?r.height/r.downScaledHeight:1;for(let d of i)d.x=d.x*u+o,d.y=d.y*r+l;return i}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var i=Date.now()-this._lastScanTimestamp,r=1e3/this._maxScansPerSecond;i<r&&await new Promise(l=>setTimeout(l,r-i)),this._lastScanTimestamp=Date.now();try{var o=await w.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(l){if(!this._active)return;this._onDecodeError(l)}!w._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=w.createQrEngine()),o?(this._onDecode?this._onDecode(o):this._legacyOnDecode&&this._legacyOnDecode(o.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:l,y:u})=>`${l},${u}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(i){i!==w.NO_QR_CODE_FOUND&&console.log(i)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let i=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],o=r.map(l=>Object.assign({},l,{[i]:{exact:this._preferredCamera}}));for(let l of[...o,...r])try{let u=await navigator.mediaDevices.getUserMedia({video:l,audio:!1}),d=this._getFacingMode(u)||(l.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:u,facingMode:d}}catch{}throw"Camera not found."}async _restartVideoStream(){let i=this._paused;await this.pause(!0)&&!i&&this._active&&await this.start()}static _stopVideoStream(i){for(let r of i.getTracks())r.stop(),i.removeTrack(r)}_setVideoMirror(i){this.$video.style.transform="scaleX("+(i==="user"?-1:1)+")"}_getFacingMode(i){return(i=i.getVideoTracks()[0])?/rear|back|environment/i.test(i.label)?"environment":/front|user|face/i.test(i.label)?"user":null:null}static _drawToCanvas(i,r,o,l=!1){o=o||document.createElement("canvas");let u=r&&r.x?r.x:0,d=r&&r.y?r.y:0,h=r&&r.width?r.width:i.videoWidth||i.width,p=r&&r.height?r.height:i.videoHeight||i.height;return l||(l=r&&r.downScaledWidth?r.downScaledWidth:h,r=r&&r.downScaledHeight?r.downScaledHeight:p,o.width!==l&&(o.width=l),o.height!==r&&(o.height=r)),r=o.getContext("2d",{alpha:!1}),r.imageSmoothingEnabled=!1,r.drawImage(i,u,d,h,p,0,0,o.width,o.height),[o,r]}static async _loadImage(i){if(i instanceof Image)return await w._awaitImageLoad(i),i;if(i instanceof HTMLVideoElement||i instanceof HTMLCanvasElement||i instanceof SVGImageElement||"OffscreenCanvas"in window&&i instanceof OffscreenCanvas||"ImageBitmap"in window&&i instanceof ImageBitmap)return i;if(i instanceof File||i instanceof Blob||i instanceof URL||typeof i=="string"){let r=new Image;r.src=i instanceof File||i instanceof Blob?URL.createObjectURL(i):i.toString();try{return await w._awaitImageLoad(r),r}finally{(i instanceof File||i instanceof Blob)&&URL.revokeObjectURL(r.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(i){i.complete&&i.naturalWidth!==0||await new Promise((r,o)=>{let l=u=>{i.removeEventListener("load",l),i.removeEventListener("error",l),u instanceof ErrorEvent?o("Image load error"):r()};i.addEventListener("load",l),i.addEventListener("error",l)})}static async _postWorkerMessage(i,r,o,l){return w._postWorkerMessageSync(await i,r,o,l)}static _postWorkerMessageSync(i,r,o,l){if(!(i instanceof Worker))return-1;let u=w._workerMessageId++;return i.postMessage({id:u,type:r,data:o},l),u}}w.DEFAULT_CANVAS_SIZE=400;w.NO_QR_CODE_FOUND="No QR code found";w._disableBarcodeDetector=!1;w._workerMessageId=0;const K={videoWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},qrVideo:{display:"flex",flexDirection:"row",width:"100%",height:"100%"}};function ge({onScan:R,deduplicationIntervalMS:i=3e3}){const r=P.useRef(null),[o]=P.useState(""),[l]=P.useState(Date.now()),u=P.useRef(l),d=P.useRef(o);let h=null;const p=P.useRef(R);p.current=R;const y=()=>{if(r.current==null||h!=null)return;const m=r.current;h=new w(m,S=>{const v=Date.now(),T=u.current,e=d.current,t=S.data===e&&v-T<i;u.current=v,d.current=S.data,p.current({data:S.data,duplicate:t})},{returnDetailedScanResult:!0,highlightScanRegion:!0,highlightCodeOutline:!0}),h.start()};return P.useEffect(()=>(setTimeout(y,1e3),()=>{h==null||h.stop(),h==null||h.destroy(),h=null}),[]),D.jsx("div",{children:D.jsx("div",{style:K.videoWrapper,children:D.jsx("video",{ref:r,style:K.qrVideo})})})}const q={outerContainer:{display:"flex",flexDirection:"column",gap:"10px"},selectionContainer:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"10px"}};function Pe({session:R}){const[i,{data:r}]=ie(),[o,l]=P.useState(!1),u=async({code:p,state:y})=>{const m=re(p);i({badgeSignedValue:m,sessionId:R.id,state:y})},d=async()=>{l(!1)},h=async()=>{l(!0)};return D.jsxs(D.Fragment,{children:[D.jsx(F,{onClick:h,children:"Start Scanning"}),D.jsxs(Y,{disableBackdropClick:!0,open:o,setOpen:l,title:`Session: ${R.name}`,renderActions:()=>D.jsx(D.Fragment,{children:D.jsx(F,{onClick:d,children:"Close"})}),children:[D.jsx(me,{onScan:u}),r&&r.user&&D.jsx(ve,{message:`Scanned user: ${r.user.email}`})]})]})}function ve({message:R}){const[i,r]=P.useState(!0),o=P.useRef(null);return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3),D.jsx("div",{style:{opacity:i?1:0,transition:"opacity 2s"},children:R})}function me({onScan:R}){const[i,r]=P.useState("none"),o=({data:l,duplicate:u})=>{i!="none"&&(u||R({code:l,state:i}))};return D.jsxs("div",{style:q.outerContainer,children:[D.jsxs("div",{style:q.selectionContainer,children:[D.jsx(F,{variant:i=="checkin"?"contained":"outlined",onClick:()=>r("checkin"),children:"Check in"}),D.jsx(F,{variant:i=="checkout"?"contained":"outlined",onClick:()=>r("checkout"),children:"Check out"})]}),i=="none"?'Select either "Check In" or "Check out"':D.jsx(ge,{onScan:o})]})}var V={exports:{}};const pe={},we=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ye=ee(we);var X;function _e(){return X||(X=1,function(R){function i(e){this.mode=o.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,s=this.data.length;t<s;t++){var a=[],n=this.data.charCodeAt(t);n>65536?(a[0]=240|(n&1835008)>>>18,a[1]=128|(n&258048)>>>12,a[2]=128|(n&4032)>>>6,a[3]=128|n&63):n>2048?(a[0]=224|(n&61440)>>>12,a[1]=128|(n&4032)>>>6,a[2]=128|n&63):n>128?(a[0]=192|(n&1984)>>>6,a[1]=128|n&63):a[0]=n,this.parsedData.push(a)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}i.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,s=this.parsedData.length;t<s;t++)e.put(this.parsedData[t],8)}};function r(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}r.prototype={addData:function(e){var t=new i(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=s&&s<=6&&(a==0||a==6)||0<=a&&a<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=a&&a<=4?this.modules[e+s][t+a]=!0:this.modules[e+s][t+a]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var a=d.getLostPoint(this);(s==0||e>a)&&(e=a,t=s)}return t},createMovieClip:function(e,t,s){var a=e.createEmptyMovieClip(t,s),n=1;this.make();for(var c=0;c<this.modules.length;c++)for(var g=c*n,f=0;f<this.modules[c].length;f++){var _=f*n,C=this.modules[c][f];C&&(a.beginFill(0,100),a.moveTo(_,g),a.lineTo(_+n,g),a.lineTo(_+n,g+n),a.lineTo(_,g+n),a.endFill())}return a},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=d.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var a=e[t],n=e[s];if(this.modules[a][n]==null)for(var c=-2;c<=2;c++)for(var g=-2;g<=2;g++)c==-2||c==2||g==-2||g==2||c==0&&g==0?this.modules[a+c][n+g]=!0:this.modules[a+c][n+g]=!1}},setupTypeNumber:function(e){for(var t=d.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var a=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=a}for(var s=0;s<18;s++){var a=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=a}},setupTypeInfo:function(e,t){for(var s=this.errorCorrectLevel<<3|t,a=d.getBCHTypeInfo(s),n=0;n<15;n++){var c=!e&&(a>>n&1)==1;n<6?this.modules[n][8]=c:n<8?this.modules[n+1][8]=c:this.modules[this.moduleCount-15+n][8]=c}for(var n=0;n<15;n++){var c=!e&&(a>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=c:n<9?this.modules[8][15-n-1+1]=c:this.modules[8][15-n-1]=c}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var s=-1,a=this.moduleCount-1,n=7,c=0,g=this.moduleCount-1;g>0;g-=2)for(g==6&&g--;;){for(var f=0;f<2;f++)if(this.modules[a][g-f]==null){var _=!1;c<e.length&&(_=(e[c]>>>n&1)==1);var C=d.getMask(t,a,g-f);C&&(_=!_),this.modules[a][g-f]=_,n--,n==-1&&(c++,n=7)}if(a+=s,a<0||this.moduleCount<=a){a-=s,s=-s;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(e,t,s){for(var a=m.getRSBlocks(e,t),n=new S,c=0;c<s.length;c++){var g=s[c];n.put(g.mode,4),n.put(g.getLength(),d.getLengthInBits(g.mode,e)),g.write(n)}for(var f=0,c=0;c<a.length;c++)f+=a[c].dataCount;if(n.getLengthInBits()>f*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+f*8+")");for(n.getLengthInBits()+4<=f*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=f*8||(n.put(r.PAD0,8),n.getLengthInBits()>=f*8));)n.put(r.PAD1,8);return r.createBytes(n,a)},r.createBytes=function(e,t){for(var s=0,a=0,n=0,c=new Array(t.length),g=new Array(t.length),f=0;f<t.length;f++){var _=t[f].dataCount,C=t[f].totalCount-_;a=Math.max(a,_),n=Math.max(n,C),c[f]=new Array(_);for(var E=0;E<c[f].length;E++)c[f][E]=255&e.buffer[E+s];s+=_;var O=d.getErrorCorrectPolynomial(C),B=new y(c[f],O.getLength()-1),$=B.mod(O);g[f]=new Array(O.getLength()-1);for(var E=0;E<g[f].length;E++){var I=E+$.getLength()-g[f].length;g[f][E]=I>=0?$.get(I):0}}for(var x=0,E=0;E<t.length;E++)x+=t[E].totalCount;for(var b=new Array(x),A=0,E=0;E<a;E++)for(var f=0;f<t.length;f++)E<c[f].length&&(b[A++]=c[f][E]);for(var E=0;E<n;E++)for(var f=0;f<t.length;f++)E<g[f].length&&(b[A++]=g[f][E]);return b};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;d.getBCHDigit(t)-d.getBCHDigit(d.G15)>=0;)t^=d.G15<<d.getBCHDigit(t)-d.getBCHDigit(d.G15);return(e<<10|t)^d.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;d.getBCHDigit(t)-d.getBCHDigit(d.G18)>=0;)t^=d.G18<<d.getBCHDigit(t)-d.getBCHDigit(d.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return d.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case u.PATTERN000:return(t+s)%2==0;case u.PATTERN001:return t%2==0;case u.PATTERN010:return s%3==0;case u.PATTERN011:return(t+s)%3==0;case u.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case u.PATTERN101:return t*s%2+t*s%3==0;case u.PATTERN110:return(t*s%2+t*s%3)%2==0;case u.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new y([1],0),s=0;s<e;s++)t=t.multiply(new y([1,h.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:return 8;case o.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,a=0;a<t;a++)for(var n=0;n<t;n++){for(var c=0,g=e.isDark(a,n),f=-1;f<=1;f++)if(!(a+f<0||t<=a+f))for(var _=-1;_<=1;_++)n+_<0||t<=n+_||f==0&&_==0||g==e.isDark(a+f,n+_)&&c++;c>5&&(s+=3+c-5)}for(var a=0;a<t-1;a++)for(var n=0;n<t-1;n++){var C=0;e.isDark(a,n)&&C++,e.isDark(a+1,n)&&C++,e.isDark(a,n+1)&&C++,e.isDark(a+1,n+1)&&C++,(C==0||C==4)&&(s+=3)}for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(s+=40);for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(s+=40);for(var E=0,n=0;n<t;n++)for(var a=0;a<t;a++)e.isDark(a,n)&&E++;var O=Math.abs(100*E/t/t-50)/5;return s+=O*10,s}},h={glog:function(e){if(e<1)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},p=0;p<8;p++)h.EXP_TABLE[p]=1<<p;for(var p=8;p<256;p++)h.EXP_TABLE[p]=h.EXP_TABLE[p-4]^h.EXP_TABLE[p-5]^h.EXP_TABLE[p-6]^h.EXP_TABLE[p-8];for(var p=0;p<255;p++)h.LOG_TABLE[h.EXP_TABLE[p]]=p;function y(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&e[s]==0;)s++;this.num=new Array(e.length-s+t);for(var a=0;a<e.length-s;a++)this.num[a]=e[a+s]}y.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var a=0;a<e.getLength();a++)t[s+a]^=h.gexp(h.glog(this.get(s))+h.glog(e.get(a)));return new y(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),s=new Array(this.getLength()),a=0;a<this.getLength();a++)s[a]=this.get(a);for(var a=0;a<e.getLength();a++)s[a]^=h.gexp(h.glog(e.get(a))+t);return new y(s,0).mod(e)}};function m(e,t){this.totalCount=e,this.dataCount=t}m.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m.getRSBlocks=function(e,t){var s=m.getRsBlockTable(e,t);if(s==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=s.length/3,n=[],c=0;c<a;c++)for(var g=s[c*3+0],f=s[c*3+1],_=s[c*3+2],C=0;C<g;C++)n.push(new m(f,_));return n},m.getRsBlockTable=function(e,t){switch(t){case l.L:return m.RS_BLOCK_TABLE[(e-1)*4+0];case l.M:return m.RS_BLOCK_TABLE[(e-1)*4+1];case l.Q:return m.RS_BLOCK_TABLE[(e-1)*4+2];case l.H:return m.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};function S(){this.buffer=[],this.length=0}S.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function T(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},typeof e=="string"&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function s(_){switch(_){case"L":return l.L;case"M":return l.M;case"Q":return l.Q;case"H":return l.H;default:throw new Error("Unknwon error correction level: "+_)}}function a(_,C){for(var E=n(_),O=1,B=0,$=0,I=v.length;$<=I;$++){var x=v[$];if(!x)throw new Error("Content too long: expected "+B+" but got "+E);switch(C){case"L":B=x[0];break;case"M":B=x[1];break;case"Q":B=x[2];break;case"H":B=x[3];break;default:throw new Error("Unknwon error correction level: "+C)}if(E<=B)break;O++}if(O>v.length)throw new Error("Content too long");return O}function n(_){var C=encodeURI(_).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return C.length+(C.length!=_?3:0)}var c=this.options.content,g=a(c,this.options.ecl),f=s(this.options.ecl);this.qrcode=new r(g,f),this.qrcode.addData(c),this.qrcode.make()}T.prototype.svg=function(e){var t=this.options||{},s=this.qrcode.modules;typeof e>"u"&&(e={container:t.container||"svg"});for(var a=typeof t.pretty<"u"?!!t.pretty:!0,n=a?"  ":"",c=a?`\r
`:"",g=t.width,f=t.height,_=s.length,C=g/(_+2*t.padding),E=f/(_+2*t.padding),O=typeof t.join<"u"?!!t.join:!1,B=typeof t.swap<"u"?!!t.swap:!1,$=typeof t.xmlDeclaration<"u"?!!t.xmlDeclaration:!0,I=typeof t.predefined<"u"?!!t.predefined:!1,x=I?n+'<defs><path id="qrmodule" d="M0 0 h'+E+" v"+C+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+c:"",b=n+'<rect x="0" y="0" width="'+g+'" height="'+f+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+c,A="",W="",j=0;j<_;j++)for(var Q=0;Q<_;Q++){var J=s[Q][j];if(J){var M=Q*C+t.padding*C,k=j*E+t.padding*E;if(B){var Z=M;M=k,k=Z}if(O){var N=C+M,H=E+k;M=Number.isInteger(M)?Number(M):M.toFixed(2),k=Number.isInteger(k)?Number(k):k.toFixed(2),N=Number.isInteger(N)?Number(N):N.toFixed(2),H=Number.isInteger(H)?Number(H):H.toFixed(2),W+="M"+M+","+k+" V"+H+" H"+N+" V"+k+" H"+M+" Z "}else I?A+=n+'<use x="'+M.toString()+'" y="'+k.toString()+'" href="#qrmodule" />'+c:A+=n+'<rect x="'+M.toString()+'" y="'+k.toString()+'" width="'+C+'" height="'+E+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+c}}O&&(A=n+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+W+'" />');var L="";switch(e.container){case"svg":$&&(L+='<?xml version="1.0" standalone="yes"?>'+c),L+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+g+'" height="'+f+'">'+c,L+=x+b+A,L+="</svg>";break;case"svg-viewbox":$&&(L+='<?xml version="1.0" standalone="yes"?>'+c),L+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+g+" "+f+'">'+c,L+=x+b+A,L+="</svg>";break;case"g":L+='<g width="'+g+'" height="'+f+'">'+c,L+=x+b+A,L+="</g>";break;default:L+=(x+b+A).replace(/^\s+/,"");break}return L},T.prototype.save=function(e,t){var s=this.svg();typeof t!="function"&&(t=function(n,c){});try{var a=ye;a.writeFile(e,s,t)}catch(n){t(n)}},R.exports=T}(V)),V.exports}var Ee=_e();const De=te(Ee),U={container:{display:"flex",flexDirection:"row",gap:"4px"},button:{padding:"0px"}};function Me({id:R,signedValue:i,useRemoteUrl:r=!1,downloadSize:o=256}){const l=ae(),[u,d]=P.useState(!1);let h;r?h=Se(i,R):h=Ce(i,R,o);const p=navigator.canShare(h.shareData),y=async()=>{try{await navigator.share(h.shareData),console.log("Shared")}catch(v){console.log("Error",v)}},m=async()=>{d(!0)},S=()=>{d(!1)};return D.jsxs("div",{id:R,style:U.container,children:[D.jsx(z,{onClick:m,style:U.button,children:D.jsx(oe,{fontSize:"small",style:{color:l.colors.foreground}})}),D.jsx(le,{target:"download",download:h.filename,href:h.href,title:"",Icon:he}),p?D.jsx(z,{onClick:y,style:U.button,children:D.jsx(ce,{fontSize:"small",style:{color:l.colors.foreground}})}):void 0,D.jsx(Y,{open:u,setOpen:d,title:"Badge",renderActions:()=>D.jsx(D.Fragment,{children:D.jsx(F,{onClick:S,children:"Close"})}),children:D.jsx("img",{src:h.href,alt:"QR Code",style:{width:"100%"}})})]})}function Ce(R,i,r=256){const l=se()(R),u=new De({content:l,padding:4,width:r,height:r,color:"#000000",background:"#ffffff",ecl:"M",xmlDeclaration:!1}).svg(),d=`data:image/svg+xml;base64,${btoa(u)}`,h=`${i}.svg`,m={files:[new File([u],h,{type:"image/svg+xml"})],title:h};return{filename:h,href:d,shareData:m}}function Se(R,i){console.log("using remote");const r=ne(R),o=`${i}.svg`;return{filename:o,href:r,shareData:{url:r,title:o}}}export{Me as B,De as Q,Pe as S};
