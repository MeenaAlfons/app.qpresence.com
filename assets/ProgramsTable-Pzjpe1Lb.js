import{o as e,a as d}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{O as j,Q as k,l as w,R as y}from"./apiSlice-DJOI_fGg.js";import{B as u,D as v,T as C}from"./Table-D2DAJKLo.js";import{S,M as P,a as I}from"./Title-DFBAGnXc.js";import{I as W}from"./Input-BvT8e-b-.js";function A({value:s,onChange:o,disabled:l=!1}){const{data:r=[]}=j(),n=a=>{const t=r.find(i=>i.id===a.target.value);if(!t){console.error("Workspace not found for id:",a.target.value);return}o(t)};return e.jsx(S,{value:s==null?void 0:s.id,label:"Workspace",onChange:n,disabled:l,children:r.map(a=>e.jsx(P,{value:a.id,children:a.name},a.id))})}const p={fieldsContainer:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},field:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"}};function F({predefinedWorkspace:s}){const[o,{}]=k(),[l,r]=d.useState(!1),[n,a]=d.useState(""),[t,i]=d.useState(null),m=async()=>{const c=s??t;if(c!==null)try{await o({name:n,workspaceId:c.id}).unwrap()}catch(f){console.error("Failed to add new workspace:",f)}},g=async()=>{await m(),r(!1)},h=async()=>{r(!1)},x=async()=>{r(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:x,children:"Add Program"}),e.jsx(v,{open:l,setOpen:r,title:"Add Program",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:g,children:"Save"}),e.jsx(u,{onClick:h,children:"Close"})]}),children:e.jsxs("div",{style:p.fieldsContainer,children:[e.jsxs("div",{style:p.field,children:[e.jsx("div",{children:"Name"}),e.jsx(W,{autoFocus:!0,placeholder:"Enter program name",value:n,onInput:c=>a(c.target.value)})]}),e.jsxs("div",{style:p.field,children:[e.jsx("div",{children:"Workspace"}),e.jsx(A,{value:s??t,onChange:i,disabled:s!=null})]})]})})]})}function E({programs:s,workspaces:o}){const l=w();return s.length==0?e.jsx(I,{children:e.jsxs("div",{style:{color:l.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Programs"}),e.jsx("div",{children:"Start by adding a program."})]})}):e.jsx(C,{data:s,fields:["program","workspace"],getId:r=>r.id,renderHeader:r=>{switch(r){case"program":return"Program";case"workspace":return"Workspace";default:return""}},rowHref:r=>y(r),renderCell:(r,n)=>{var a;switch(n){case"program":return r.name;case"workspace":return((a=o.find(t=>t.id===r.workspaceId))==null?void 0:a.name)||"Unknown Workspace";default:return r[n]}}})}export{F as A,E as P};
