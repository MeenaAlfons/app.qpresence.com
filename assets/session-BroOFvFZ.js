import{a as c,o as r,w as d}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{T as i,H as l,A as m}from"./Table-D2DAJKLo.js";import{B as p}from"./Breadcrumbs-Bifmm2Hh.js";import{S as h}from"./ScanDialog-iUhfPgzZ.js";import{I as f,J as C,E as x}from"./apiSlice-DJOI_fGg.js";import"./index-OoWrCoTk.js";import"./IconLink--Oimp-xC.js";import"./icons-B1YvrFoj.js";import"./useSlotProps-CYCGcHqs.js";function k({records:a,invitees:e}){const[n,u]=c.useState(new Map);return c.useEffect(()=>{const t=new Map;e.forEach(s=>{t.set(s.user.id,s)}),u(t)},[e]),r.jsx(i,{data:a,fields:["user","state","createdAt"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"User";case"state":return"State";case"createdAt":return"Created At";default:return""}},renderCell:(t,s)=>{var o;switch(s){case"user":return((o=n.get(t.userId))==null?void 0:o.user.email)||"";case"createdAt":return new Date(t.createdAt).toLocaleString();default:return t[s]}}})}function j({inviteeInsights:a}){return r.jsx(i,{data:a,fields:["user","earliestCheckin","latestCheckout","duration"],getId:e=>e.user.id,renderHeader:e=>{switch(e){case"user":return"User";case"earliestCheckin":return"Earliest Check-in";case"latestCheckout":return"Latest Check-out";case"duration":return"Duration";default:return""}},renderCell:(e,n)=>{switch(n){case"user":return e.user.email;case"earliestCheckin":return e.earliestCheckin?new Date(e.earliestCheckin).toLocaleString():"-";case"latestCheckout":return e.latestCheckout?new Date(e.latestCheckout).toLocaleString():"-";case"duration":return e.totalDurationSeconds!==null?`${e.totalDurationSeconds} seconds`:"-";default:return e[n]}}})}function w({sessionId:a}){var s,o;const{data:e=null}=f({sessionId:a,includeParents:!0}),{data:{inviteeInsights:n=[],records:u=[]}={}}=C(a),{data:t=[]}=x(((s=e==null?void 0:e.program)==null?void 0:s.id)||"",{skip:!((o=e==null?void 0:e.program)!=null&&o.id)});return e==null?"Loading...":r.jsxs(r.Fragment,{children:[r.jsx(l,{children:r.jsx(p,{workspace:e.workspace,program:e.program,session:e.session})}),r.jsx(m,{children:r.jsx(h,{session:e.session})}),r.jsx("h2",{children:"Invitees"}),r.jsx(j,{inviteeInsights:n}),r.jsx("h2",{children:"Records"}),r.jsx(k,{records:u,invitees:t})]})}const M=d(function({params:e}){return r.jsx(w,{sessionId:e.sessionId})});export{M as default};
