import{a as p,o as s,w as Le}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{u as T,B as ee,D as ze,T as ue,H as Ae,A as Re}from"./Table-D4Cd7HrO.js";import{p as H,q as N,s as $,t as I,v as D,w as k,x as E,y as _,z as Me,A as qe,C as He,D as Ne,e as pe,j as $e,E as De,F as Ee,G as Be,H as We,I as Ue}from"./Link-CqIjXgDl.js";import{O as Oe,F as Ve,S as Ge}from"./Select-C0tav2AO.js";import{i as Qe,a as le,F as _e,u as se,f as oe,I as Je}from"./Input-DUu1R3QO.js";import{A as Ke,S as Xe}from"./SessionsTable-BNVDpFUW.js";import{B as Ye}from"./Breadcrumbs-IXzULDUa.js";import{f as Ze,I as er,D as rr}from"./InviteUsersDialog-CVCRLfYH.js";import{S as Q,T as re}from"./Title-D3Od2Hrb.js";import{S as tr}from"./icons-DSfoUHeb.js";import{B as sr}from"./BadgeActions-CnYAUb3K.js";import{L as or}from"./Loading-DqWqUPUq.js";import"./index-OoWrCoTk.js";import"./IconButton-CifhT9Ms.js";function te(e,r){var t,o,n;return p.isValidElement(e)&&r.indexOf(e.type.muiName??((n=(o=(t=e.type)==null?void 0:t._payload)==null?void 0:o.value)==null?void 0:n.muiName))!==-1}function ar(e){return H("MuiFormControl",e)}N("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const nr=e=>{const{classes:r,margin:t,fullWidth:o}=e,n={root:["root",t!=="none"&&`margin${k(t)}`,o&&"fullWidth"]};return E(n,ar,r)},ir=I("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[`margin${k(t.margin)}`],t.fullWidth&&r.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),lr=p.forwardRef(function(r,t){const o=$({props:r,name:"MuiFormControl"}),{children:n,className:a,color:i="primary",component:d="div",disabled:l=!1,error:m=!1,focused:c,fullWidth:g=!1,hiddenLabel:h=!1,margin:v="none",required:x=!1,size:f="medium",variant:u="outlined",...F}=o,w={...o,color:i,component:d,disabled:l,error:m,fullWidth:g,hiddenLabel:h,margin:v,required:x,size:f,variant:u},J=nr(w),[y,K]=p.useState(()=>{let S=!1;return n&&p.Children.forEach(n,b=>{if(!te(b,["Input","Select"]))return;const R=te(b,["Select"])?b.props.input:b;R&&Qe(R.props)&&(S=!0)}),S}),[B,L]=p.useState(()=>{let S=!1;return n&&p.Children.forEach(n,b=>{te(b,["Input","Select"])&&(le(b.props,!0)||le(b.props.inputProps,!0))&&(S=!0)}),S}),[W,z]=p.useState(!1);l&&W&&z(!1);const U=c!==void 0&&!l?c:W;let O;p.useRef(!1);const V=p.useCallback(()=>{L(!0)},[]),A=p.useCallback(()=>{L(!1)},[]),X=p.useMemo(()=>({adornedStart:y,setAdornedStart:K,color:i,disabled:l,error:m,filled:B,focused:U,fullWidth:g,hiddenLabel:h,size:f,onBlur:()=>{z(!1)},onFocus:()=>{z(!0)},onEmpty:A,onFilled:V,registerEffect:O,required:x,variant:u}),[y,i,l,m,B,U,g,h,O,A,V,x,f,u]);return s.jsx(_e.Provider,{value:X,children:s.jsx(ir,{as:d,ownerState:w,className:D(J.root,a),ref:t,...F,children:n})})});function dr(e){return H("MuiFormHelperText",e)}const de=N("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var ce;const cr=e=>{const{classes:r,contained:t,size:o,disabled:n,error:a,filled:i,focused:d,required:l}=e,m={root:["root",n&&"disabled",a&&"error",o&&`size${k(o)}`,t&&"contained",d&&"focused",i&&"filled",l&&"required"]};return E(m,dr,r)},ur=I("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.size&&r[`size${k(t.size)}`],t.contained&&r.contained,t.filled&&r.filled]}})(_(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${de.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${de.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:r})=>r.contained,style:{marginLeft:14,marginRight:14}}]}))),pr=p.forwardRef(function(r,t){const o=$({props:r,name:"MuiFormHelperText"}),{children:n,className:a,component:i="p",disabled:d,error:l,filled:m,focused:c,margin:g,required:h,variant:v,...x}=o,f=se(),u=oe({props:o,muiFormControl:f,states:["variant","size","disabled","error","filled","focused","required"]}),F={...o,component:i,contained:u.variant==="filled"||u.variant==="outlined",variant:u.variant,size:u.size,disabled:u.disabled,error:u.error,filled:u.filled,focused:u.focused,required:u.required};delete F.ownerState;const w=cr(F);return s.jsx(ur,{as:i,className:D(w.root,a),ref:t,...x,ownerState:F,children:n===" "?ce||(ce=s.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):n})});function mr(e){return H("MuiFormLabel",e)}const q=N("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fr=e=>{const{classes:r,color:t,focused:o,disabled:n,error:a,filled:i,required:d}=e,l={root:["root",`color${k(t)}`,n&&"disabled",a&&"error",i&&"filled",o&&"focused",d&&"required"],asterisk:["asterisk",a&&"error"]};return E(l,mr,r)},xr=I("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.color==="secondary"&&r.colorSecondary,t.filled&&r.filled]}})(_(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Me()).map(([r])=>({props:{color:r},style:{[`&.${q.focused}`]:{color:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${q.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${q.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),gr=I("span",{name:"MuiFormLabel",slot:"Asterisk"})(_(({theme:e})=>({[`&.${q.error}`]:{color:(e.vars||e).palette.error.main}}))),hr=p.forwardRef(function(r,t){const o=$({props:r,name:"MuiFormLabel"}),{children:n,className:a,color:i,component:d="label",disabled:l,error:m,filled:c,focused:g,required:h,...v}=o,x=se(),f=oe({props:o,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),u={...o,color:f.color||"primary",component:d,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required},F=fr(u);return s.jsxs(xr,{as:d,ownerState:u,className:D(F.root,a),ref:t,...v,children:[n,f.required&&s.jsxs(gr,{ownerState:u,"aria-hidden":!0,className:F.asterisk,children:[" ","*"]})]})});function br(e){return H("MuiInputLabel",e)}N("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const vr=e=>{const{classes:r,formControl:t,size:o,shrink:n,disableAnimation:a,variant:i,required:d}=e,l={root:["root",t&&"formControl",!a&&"animated",n&&"shrink",o&&o!=="medium"&&`size${k(o)}`,i],asterisk:[d&&"asterisk"]},m=E(l,br,r);return{...r,...m}},Fr=I(hr,{shouldForwardProp:e=>qe(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[{[`& .${q.asterisk}`]:r.asterisk},r.root,t.formControl&&r.formControl,t.size==="small"&&r.sizeSmall,t.shrink&&r.shrink,!t.disableAnimation&&r.animated,t.focused&&r.focused,r[t.variant]]}})(_(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:r})=>r.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:r})=>r.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:r})=>!r.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:r,ownerState:t})=>r==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:r,ownerState:t,size:o})=>r==="filled"&&t.shrink&&o==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:r,ownerState:t})=>r==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Sr=p.forwardRef(function(r,t){const o=$({name:"MuiInputLabel",props:r}),{disableAnimation:n=!1,margin:a,shrink:i,variant:d,className:l,...m}=o,c=se();let g=i;typeof g>"u"&&c&&(g=c.filled||c.focused||c.adornedStart);const h=oe({props:o,muiFormControl:c,states:["size","variant","required","focused"]}),v={...o,disableAnimation:n,formControl:c,shrink:g,size:h.size,variant:h.variant,required:h.required,focused:h.focused},x=vr(v);return s.jsx(Fr,{"data-shrink":g,ref:t,className:D(x.root,l),...m,ownerState:v,classes:x})});function yr(e){return H("MuiTextField",e)}N("MuiTextField",["root"]);const Cr={standard:Je,filled:Ve,outlined:Oe},jr=e=>{const{classes:r}=e;return E({root:["root"]},yr,r)},Pr=I(lr,{name:"MuiTextField",slot:"Root"})({}),wr=p.forwardRef(function(r,t){const o=$({props:r,name:"MuiTextField"}),{autoComplete:n,autoFocus:a=!1,children:i,className:d,color:l="primary",defaultValue:m,disabled:c=!1,error:g=!1,FormHelperTextProps:h,fullWidth:v=!1,helperText:x,id:f,InputLabelProps:u,inputProps:F,InputProps:w,inputRef:J,label:y,maxRows:K,minRows:B,multiline:L=!1,name:W,onBlur:z,onChange:U,onFocus:O,placeholder:V,required:A=!1,rows:X,select:S=!1,SelectProps:b,slots:R={},slotProps:me={},type:fe,value:ae,variant:G="outlined",...xe}=o,C={...o,autoFocus:a,color:l,disabled:c,error:g,fullWidth:v,multiline:L,required:A,select:S,variant:G},ge=jr(C),j=He(f),Y=x&&j?`${j}-helper-text`:void 0,ne=y&&j?`${j}-label`:void 0,he=Cr[G],P={slots:R,slotProps:{input:w,inputLabel:u,htmlInput:F,formHelperText:h,select:b,...me}},M={},Z=P.slotProps.inputLabel;G==="outlined"&&(Z&&typeof Z.shrink<"u"&&(M.notched=Z.shrink),M.label=y),S&&((!b||!b.native)&&(M.id=void 0),M["aria-describedby"]=void 0);const[be,ve]=T("root",{elementType:Pr,shouldForwardComponentProp:!0,externalForwardedProps:{...P,...xe},ownerState:C,className:D(ge.root,d),ref:t,additionalProps:{disabled:c,error:g,fullWidth:v,required:A,color:l,variant:G}}),[Fe,Se]=T("input",{elementType:he,externalForwardedProps:P,additionalProps:M,ownerState:C}),[ye,Ce]=T("inputLabel",{elementType:Sr,externalForwardedProps:P,ownerState:C}),[je,Pe]=T("htmlInput",{elementType:"input",externalForwardedProps:P,ownerState:C}),[we,Te]=T("formHelperText",{elementType:pr,externalForwardedProps:P,ownerState:C}),[Ie,ke]=T("select",{elementType:Ge,externalForwardedProps:P,ownerState:C}),ie=s.jsx(Fe,{"aria-describedby":Y,autoComplete:n,autoFocus:a,defaultValue:m,fullWidth:v,multiline:L,name:W,rows:X,maxRows:K,minRows:B,type:fe,value:ae,id:j,inputRef:J,onBlur:z,onChange:U,onFocus:O,placeholder:V,inputProps:Pe,slots:{input:R.htmlInput?je:void 0},...Se});return s.jsxs(be,{...ve,children:[y!=null&&y!==""&&s.jsx(ye,{htmlFor:j,id:ne,...Ce,children:y}),S?s.jsx(Ie,{"aria-describedby":Y,id:j,labelId:ne,value:ae,input:ie,...ke,children:i}):ie,x&&s.jsx(we,{id:Y,...Te,children:x})]})});function Tr({program:e}){const[r,{}]=Ne(),[t,o]=p.useState(!1),[n,a]=p.useState(""),i=async()=>{if(n.length!==0)try{await r({programId:e.id,emails:[n]}).unwrap()}catch(c){console.error("Failed to add facilitator to program:",c)}},d=async()=>{await i(),o(!1)},l=async()=>{o(!1)},m=async()=>{o(!0)};return s.jsxs(s.Fragment,{children:[s.jsx(ee,{onClick:m,children:"Add Facilitators"}),s.jsx(ze,{open:t,setOpen:o,title:"Add Facilitators To Program",renderActions:()=>s.jsxs(s.Fragment,{children:[s.jsx(ee,{onClick:d,children:"Save"}),s.jsx(ee,{onClick:l,children:"Close"})]}),children:s.jsx(wr,{placeholder:"Enter email",onInput:c=>{console.log("onInput",c.target.value),a(c.target.value.trim())}})})]})}function Ir({facilitators:e}){const r=pe();return e.length==0?s.jsx(Q,{children:s.jsxs("div",{style:{color:r.colors.hint,textAlign:"center"},children:[s.jsx("div",{children:"No Facilitators"}),s.jsx("div",{children:"Start by adding facilitators."})]})}):s.jsx(Q,{children:s.jsx(ue,{data:e,fields:["user"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"Facilitator";default:return""}},renderCell:(t,o)=>{switch(o){case"user":return s.jsx("div",{children:t.email});default:return t[o]}}})})}function kr({inviteeInsights:e,invitees:r}){$e();const t=pe(),[o,n]=p.useState([]);return p.useEffect(()=>{n([...e].sort((a,i)=>{const d=(a.user.name||a.user.email).toLowerCase(),l=(i.user.name||i.user.email).toLowerCase();return d<l?-1:1}))},[e]),e.length==0?s.jsx(Q,{children:s.jsxs("div",{style:{color:t.colors.hint,textAlign:"center"},children:[s.jsx("div",{children:"No Invitees"}),s.jsx("div",{children:"Start by inviting users."})]})}):s.jsx(Q,{children:s.jsx(ue,{data:o,fields:["user","badgeSignedValue","numSessions","duration"],getId:a=>a.user.id,renderHeader:a=>{switch(a){case"user":return"Invitee";case"badgeSignedValue":return"Badge";case"numSessions":return"Sessions";case"duration":return"Duration";default:return""}},renderCell:(a,i)=>{const d=r.find(l=>l.user.id===a.user.id);switch(i){case"user":return s.jsx("div",{children:a.user.name||a.user.email});case"badgeSignedValue":return d?s.jsx(sr,{id:d.badge.id,signedValue:d.badge.signedValue}):void 0;case"numSessions":return a.numSessions;case"duration":return Ze((a.totalDurationSeconds??0)*1e3);default:return a[i]}}})})}function Lr({programId:e}){const{data:r=null}=De({programId:e,includeWorkspace:!0}),{data:t=[]}=Ee(e),{data:o=[]}=Be(e),{data:n=[]}=We(e),{data:{inviteeInsights:a=[]}={}}=Ue(e);return r==null?s.jsx(or,{}):s.jsxs(s.Fragment,{children:[s.jsx(Ae,{children:s.jsx(Ye,{workspace:r.workspace,program:r.program})}),s.jsxs(Re,{children:[s.jsx(Ke,{predefinedProgram:r.program}),s.jsx(er,{program:r.program}),s.jsx(rr,{invitees:o}),s.jsx(Tr,{program:r.program})]}),s.jsxs(re,{children:[s.jsx(tr,{}),"Sessions"]}),s.jsx(Xe,{sessions:t,programs:[r.program],workspaces:r.workspace?[r.workspace]:[]}),s.jsx(re,{children:"Invitees"}),s.jsx(kr,{inviteeInsights:a,invitees:o}),s.jsx(re,{children:"Facilitators"}),s.jsx(Ir,{facilitators:n})]})}const Vr=Le(function({params:r}){return s.jsx(Lr,{programId:r.programId})});export{Vr as default};
