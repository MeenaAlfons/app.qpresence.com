import{a as u,o as e,w as f}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{T as p,H as g,A as h}from"./Table-BnIuKFvj.js";import{B as x}from"./Breadcrumbs-DicO7JIq.js";import{D as j,S as C}from"./DownloadableQrCode-DWiRaj4M.js";import{S as l,T as m}from"./Title-Zen3SAoM.js";import{j as S,e as w,M as k,N as b,G as A}from"./Link-BtxS3F1D.js";import{f as D,I as T,D as v}from"./InviteUsersDialog-Da2dSMVF.js";import{L as I}from"./Loading-DqWqUPUq.js";import"./index-OoWrCoTk.js";import"./icons-CmnslTl-.js";import"./IconButton-DKj9PuDg.js";function y({records:a,invitees:r}){const[i,c]=u.useState(new Map),[s,o]=u.useState([]);return u.useEffect(()=>{const t=new Map;r.forEach(n=>{t.set(n.user.id,n)}),c(t)},[r]),u.useEffect(()=>{o([...a].sort((t,n)=>new Date(n.createdAt).getTime()-new Date(t.createdAt).getTime()))},[a]),e.jsx(p,{data:s,fields:["user","state","createdAt"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"Invitee";case"state":return"State";case"createdAt":return"Created At";default:return""}},renderCell:(t,n)=>{var d;switch(n){case"user":return((d=i.get(t.userId))==null?void 0:d.user.email)||"";case"createdAt":return new Date(t.createdAt).toLocaleString();default:return t[n]}}})}function B({inviteeInsights:a,invitees:r}){const i=S(),c=w();return a.length==0?e.jsx(l,{children:e.jsxs("div",{style:{color:c.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Invitees"}),e.jsx("div",{children:"Start by inviting users."})]})}):e.jsx(l,{children:e.jsx(p,{data:a,fields:["user","badge","earliestCheckin","latestCheckout","duration"],getId:s=>s.user.id,renderHeader:s=>{switch(s){case"user":return"Invitee";case"badge":return"Badge";case"earliestCheckin":return"Earliest Check-in";case"latestCheckout":return"Latest Check-out";case"duration":return"Duration";default:return""}},renderCell:(s,o)=>{const t=r.find(n=>n.user.id===s.user.id);switch(o){case"user":return s.user.email;case"badge":return t?e.jsx(j,{id:t.badge.id,value:i(t.badge.signedValue),displaySize:32}):void 0;case"earliestCheckin":return s.earliestCheckin?new Date(s.earliestCheckin).toLocaleString():"-";case"latestCheckout":return s.latestCheckout?new Date(s.latestCheckout).toLocaleString():"-";case"duration":return D((s.totalDurationSeconds??0)*1e3);default:return s[o]}}})})}function E({sessionId:a}){var o,t;const{data:r=null}=k({sessionId:a,includeParents:!0}),{data:{inviteeInsights:i=[],records:c=[]}={}}=b(a),{data:s=[]}=A(((o=r==null?void 0:r.program)==null?void 0:o.id)||"",{skip:!((t=r==null?void 0:r.program)!=null&&t.id)});return r==null?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(x,{workspace:r.workspace,program:r.program,session:r.session})}),e.jsxs(h,{children:[e.jsx(C,{session:r.session}),e.jsx(T,{program:r.program}),e.jsx(v,{invitees:s})]}),e.jsx(m,{children:"Invitees"}),e.jsx(B,{inviteeInsights:i,invitees:s}),e.jsx(m,{children:"Records"}),e.jsx(y,{records:c,invitees:s})]})}const V=f(function({params:r}){return e.jsx(E,{sessionId:r.sessionId})});export{V as default};
