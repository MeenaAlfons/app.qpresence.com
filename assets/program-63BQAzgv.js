import{a as u,o as e,w as f}from"./chunk-QMGIS6GS-DCKQtHAW.js";import{B as g,D as S,T as x,H as v,A as w}from"./Table-Ces7b1vt.js";import{m as y,c as j,g as F,n as A,o as D,p as P,q as T,r as b}from"./Link-CbW7hTqX.js";import{T as B,f as C,I,D as k}from"./InviteUsersDialog-DVM2Is-7.js";import{A as Q,S as E}from"./SessionsTable-ZC8CN-L0.js";import{B as G}from"./Breadcrumbs-Dzy9oSpF.js";import{S as m,T as p}from"./Title-7p6UWT1i.js";import{S as V}from"./icons-pSeow88q.js";import{B as H}from"./BadgeActions-C3l3z07Q.js";import{L}from"./Loading-dW8HB0qf.js";import"./index-DPKgvXHX.js";import"./IconButton-BzC7zxD8.js";function N({program:a}){const[r,{}]=y(),[t,n]=u.useState(!1),[d,s]=u.useState(""),o=async()=>{if(d.length!==0)try{await r({programId:a.id,emails:[d]}).unwrap()}catch(c){console.error("Failed to add facilitator to program:",c)}},i=async()=>{await o(),n(!1)},l=async()=>{n(!1)},h=async()=>{n(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(g,{onClick:h,children:"Add Facilitators"}),e.jsx(S,{open:t,setOpen:n,title:"Add Facilitators To Program",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{onClick:i,children:"Save"}),e.jsx(g,{onClick:l,children:"Close"})]}),children:e.jsx(B,{placeholder:"Enter email",onInput:c=>{console.log("onInput",c.target.value),s(c.target.value.trim())}})})]})}function O({facilitators:a}){const r=j();return a.length==0?e.jsx(m,{children:e.jsxs("div",{style:{color:r.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Facilitators"}),e.jsx("div",{children:"Start by adding facilitators."})]})}):e.jsx(m,{children:e.jsx(x,{data:a,fields:["user"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"Facilitator";default:return""}},renderCell:(t,n)=>{switch(n){case"user":return e.jsx("div",{children:t.email});default:return t[n]}}})})}function U({inviteeInsights:a,invitees:r}){F();const t=j(),[n,d]=u.useState([]);return u.useEffect(()=>{d([...a].sort((s,o)=>{const i=(s.user.name||s.user.email).toLowerCase(),l=(o.user.name||o.user.email).toLowerCase();return i<l?-1:1}))},[a]),a.length==0?e.jsx(m,{children:e.jsxs("div",{style:{color:t.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Invitees"}),e.jsx("div",{children:"Start by inviting users."})]})}):e.jsx(m,{children:e.jsx(x,{data:n,fields:["user","badgeSignedValue","numSessions","duration"],getId:s=>s.user.id,renderHeader:s=>{switch(s){case"user":return"Invitee";case"badgeSignedValue":return"Badge";case"numSessions":return"Sessions";case"duration":return"Duration";default:return""}},renderCell:(s,o)=>{const i=r.find(l=>l.user.id===s.user.id);switch(o){case"user":return e.jsx("div",{children:s.user.name||s.user.email});case"badgeSignedValue":return i?e.jsx(H,{id:i.badge.id,signedValue:i.badge.signedValue}):void 0;case"numSessions":return s.numSessions;case"duration":return C((s.totalDurationSeconds??0)*1e3);default:return s[o]}}})})}function q({programId:a}){const{data:r=null}=A({programId:a,includeWorkspace:!0}),{data:t=[]}=D(a),{data:n=[]}=P(a),{data:d=[]}=T(a),{data:{inviteeInsights:s=[]}={}}=b(a);return r==null?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(G,{workspace:r.workspace,program:r.program})}),e.jsxs(w,{children:[e.jsx(Q,{predefinedProgram:r.program}),e.jsx(I,{program:r.program}),e.jsx(k,{invitees:n}),e.jsx(N,{program:r.program})]}),e.jsxs(p,{children:[e.jsx(V,{}),"Sessions"]}),e.jsx(E,{sessions:t,programs:[r.program],workspaces:r.workspace?[r.workspace]:[]}),e.jsx(p,{children:"Invitees"}),e.jsx(U,{inviteeInsights:s,invitees:n}),e.jsx(p,{children:"Facilitators"}),e.jsx(O,{facilitators:d})]})}const re=f(function({params:r}){return e.jsx(q,{programId:r.programId})});export{re as default};
