import{a as u,o as e,w as g}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{T as p,H as f,A as h}from"./Table-D4Cd7HrO.js";import{B as x}from"./Breadcrumbs-IXzULDUa.js";import{B as j,S as C}from"./BadgeActions-BWyNOJsQ.js";import{S as l,T as m}from"./Title-D3Od2Hrb.js";import{j as S,e as w,M as k,N as A,G as b}from"./Link-CqIjXgDl.js";import{f as D,I as T,D as B}from"./InviteUsersDialog-DhG6Tsny.js";import{L as v}from"./Loading-DqWqUPUq.js";import"./index-OoWrCoTk.js";import"./icons-DSfoUHeb.js";import"./IconButton-CifhT9Ms.js";function I({records:a,invitees:r}){const[c,s]=u.useState(new Map),[n,o]=u.useState([]);return u.useEffect(()=>{const t=new Map;r.forEach(i=>{t.set(i.user.id,i)}),s(t)},[r]),u.useEffect(()=>{o([...a].sort((t,i)=>new Date(i.createdAt).getTime()-new Date(t.createdAt).getTime()))},[a]),e.jsx(p,{data:n,fields:["user","state","createdAt"],getId:t=>t.id,renderHeader:t=>{switch(t){case"user":return"Invitee";case"state":return"State";case"createdAt":return"Created At";default:return""}},renderCell:(t,i)=>{var d;switch(i){case"user":return((d=c.get(t.userId))==null?void 0:d.user.email)||"";case"createdAt":return new Date(t.createdAt).toLocaleString();default:return t[i]}}})}function E({inviteeInsights:a,invitees:r}){S();const c=w();return a.length==0?e.jsx(l,{children:e.jsxs("div",{style:{color:c.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Invitees"}),e.jsx("div",{children:"Start by inviting users."})]})}):e.jsx(l,{children:e.jsx(p,{data:a,fields:["user","badge","earliestCheckin","latestCheckout","duration"],getId:s=>s.user.id,renderHeader:s=>{switch(s){case"user":return"Invitee";case"badge":return"Badge";case"earliestCheckin":return"Earliest Check-in";case"latestCheckout":return"Latest Check-out";case"duration":return"Duration";default:return""}},renderCell:(s,n)=>{const o=r.find(t=>t.user.id===s.user.id);switch(n){case"user":return s.user.email;case"badge":return o?e.jsx(j,{id:o.badge.id,signedValue:o.badge.signedValue}):void 0;case"earliestCheckin":return s.earliestCheckin?new Date(s.earliestCheckin).toLocaleString():"-";case"latestCheckout":return s.latestCheckout?new Date(s.latestCheckout).toLocaleString():"-";case"duration":return D((s.totalDurationSeconds??0)*1e3);default:return s[n]}}})})}function L({sessionId:a}){var o,t;const{data:r=null}=k({sessionId:a,includeParents:!0}),{data:{inviteeInsights:c=[],records:s=[]}={}}=A(a),{data:n=[]}=b(((o=r==null?void 0:r.program)==null?void 0:o.id)||"",{skip:!((t=r==null?void 0:r.program)!=null&&t.id)});return r==null?e.jsx(v,{}):e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsx(x,{workspace:r.workspace,program:r.program,session:r.session})}),e.jsxs(h,{children:[e.jsx(C,{session:r.session}),e.jsx(T,{program:r.program}),e.jsx(B,{invitees:n})]}),e.jsx(m,{children:"Invitees"}),e.jsx(E,{inviteeInsights:c,invitees:n}),e.jsx(m,{children:"Records"}),e.jsx(I,{records:s,invitees:n})]})}const q=g(function({params:r}){return e.jsx(L,{sessionId:r.sessionId})});export{q as default};
