import{a as d,o as e,w as A}from"./chunk-QMGIS6GS-DqORk8pi.js";import{L as O}from"./Loading-DDn8iYM2.js";import{u as D,a8 as T,a9 as W,i as R,aa as L,ab as P,ac as F,ad as E}from"./link-Bsfy2yxm.js";import{D as I,B as p,T as b,L as N,a as B}from"./Table-DS5-tfNL.js";import{F as w,I as U,a as M,b as Q,M as G}from"./ManageLayout-BaGFBrU_.js";import{A as $}from"./AddProgramDialog-CCDBBxeJ.js";import{R as H,F as S,a as C}from"./RadioGroup-BTAgXCdL.js";import{W as J}from"./WorkspaceDialog-BFrYSn1S.js";import"./index-DiSreKSV.js";import"./ProgramDialog-DJ0S8A5h.js";import"./Select-kalGoytV.js";import"./List-Ux0-XquF.js";const z={container:{width:"100%"},field:{marginBottom:"10px"}};function q({open:i,setOpen:r,workspace:l}){const n=D(),[c,{}]=T(),[t,h]=d.useState(""),[j,u]=d.useState("facilitator"),[v,x]=d.useState(""),f=a=>{r(a),x(""),h(""),u("facilitator")},g=async()=>{if(t==""){x("Please enter a valid email");return}try{await c({workspaceId:l.id,email:t,relationName:j}).unwrap()}catch(a){x(`Failed to add access: ${JSON.stringify(a)}`);return}f(!1)};return e.jsx(I,{open:i,setOpen:f,title:"Add Access",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:g,children:"Save"}),e.jsx(p,{onClick:()=>f(!1),children:"Close"})]}),children:e.jsxs("div",{style:z.container,children:[e.jsx("div",{style:z.field,children:e.jsxs(w,{variant:"standard",fullWidth:!0,children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",fullWidth:!0,autoFocus:!0,placeholder:"Enter email",value:t,onInput:a=>h(a.target.value)})]})}),e.jsx("div",{style:z.field,children:e.jsxs(w,{children:[e.jsx(Q,{id:"demo-radio-buttons-group-label",children:"Role"}),e.jsxs(H,{id:"role","aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",value:j,onChange:a=>u(a.target.value),children:[e.jsx(S,{value:"facilitator",control:e.jsx(C,{}),label:"Facilitator"}),e.jsx(S,{value:"admin",control:e.jsx(C,{}),label:"Admin"})]})]})}),e.jsx("div",{style:{color:n.colors3.error,fontSize:n.font.sizes.lower2},children:v})]})})}function K({open:i,setOpen:r,workspace:l}){const[n,{}]=W();return e.jsx(J,{open:i,setOpen:r,predefinedWorkspace:l,onSave:async({name:c})=>{await n({id:l.id,name:c}).unwrap()}})}const s={container:{width:"100%",display:"flex",flexDirection:"column"},titleRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"20px",marginLeft:"16px",marginRight:"16px"},title:{},actionbar:{display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",gap:"5px"},detailsTable:{textAlign:"left",marginLeft:"16px",marginRight:"16px"},detailsLabel:{fontWeight:"bold"},section:{width:"100%",display:"flex",flexDirection:"column",marginTop:"30px",borderTop:"1px solid",paddingTop:"20px",minHeight:"100px"},sectionTitleRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"5px",marginLeft:"16px",marginRight:"16px"},sectionTitle:{fontWeight:"bold"},lastColumn:{display:"flex",flexDirection:"row",justifyContent:"end"}};function V({workspace:i,programs:r,organizers:l,resources:n,relationName:c}){const t=D(),h=R(),[j,u]=d.useState(!1),[v,x]=d.useState(!1),[f,g]=d.useState(!1),[a,Y]=d.useState(!1),y={...s.section,borderColor:t.colors3.divider},k=i.plan||"free";return e.jsxs("div",{style:s.container,children:[e.jsxs("div",{style:s.titleRow,children:[e.jsx("div",{style:{...s.title,color:t.colors3.text1,fontSize:t.font.sizes.h1},children:i.name}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>u(!0),children:"Edit"}),e.jsx(K,{open:j,setOpen:u,workspace:i})]})]}),e.jsx("table",{style:s.detailsTable,children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{...s.detailsLabel,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Role"}),e.jsx("td",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:c})]})})}),e.jsxs("section",{style:y,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Subscription"}),e.jsx("div",{style:s.actionbar})]}),e.jsx("table",{style:s.detailsTable,children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Plan"}),e.jsx("td",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:k})]})})})]}),e.jsxs("section",{style:y,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Usage"}),e.jsx("div",{style:s.actionbar})]}),e.jsx(b,{data:n,fields:["resource","usage"],getId:o=>o.name,renderCell:(o,m)=>{switch(m){case"resource":return e.jsx("div",{children:o.name});case"usage":return e.jsxs("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:[o.used," / ",o.limit]})}}})]}),e.jsxs("section",{style:y,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Programs"}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>x(!0),children:"Add"}),e.jsx($,{open:v,setOpen:x,predefinedWorkspace:i})]})]}),e.jsx(b,{data:r,fields:["program","scan"],getId:o=>o.id,renderCell:(o,m)=>{switch(m){case"program":return e.jsx(N,{href:h(o),style:{...s.program,color:t.colors3.text1,textDecorationColor:t.colors3.text1,textUnderlineOffset:t.font.sizes.textUnderlineOffset,fontSize:t.font.sizes.normal},children:o.name});case"role":return e.jsx("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:"Admin"})}}})]}),e.jsxs("section",{style:y,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Access"}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>g(!0),children:"Add"}),e.jsx(q,{open:f,setOpen:g,workspace:i})]})]}),e.jsx(b,{data:l,fields:["user","role"],getId:o=>o.user.id,renderCell:(o,m)=>{switch(m){case"user":return e.jsxs("div",{children:[e.jsx("div",{style:{color:t.colors3.text1,fontSize:t.font.sizes.normal},children:o.user.name}),e.jsx("div",{style:{color:t.colors3.text2,fontSize:t.font.sizes.lower2},children:o.user.email})]});case"role":return e.jsx("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:o.relationName})}}})]})]})}function X({workspaceId:i}){const{data:r}=L(i),{data:l=[]}=P(i),{data:n=[]}=F(i),{data:c=[]}=E(i);return r==null?e.jsx(O,{}):e.jsx(B,{currentPage:"manage",children:e.jsx(G,{currentPage:"workspaces",children:e.jsx(V,{workspace:r.workspace,programs:l,organizers:c,resources:n,relationName:r.relationName})})})}const de=A(function({params:r}){return e.jsx(X,{workspaceId:r.workspaceId})});export{de as default};
