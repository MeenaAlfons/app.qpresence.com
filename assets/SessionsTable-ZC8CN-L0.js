import{o as e,a as p}from"./chunk-QMGIS6GS-DCKQtHAW.js";import{j,s as w,c as v,t as y}from"./Link-CbW7hTqX.js";import{B as x,D as k,I as C,T as I}from"./Table-Ces7b1vt.js";import{a as D,M as P,S as h}from"./Title-7p6UWT1i.js";import{S as A}from"./BadgeActions-C3l3z07Q.js";function b({value:n,onChange:c,disabled:l=!1}){const{data:{programs:a=[]}={}}=j(),u=r=>{const d=a.find(s=>s.id===r.target.value);if(!d){console.error("Program not found for id:",r.target.value);return}c(d)};return e.jsx(D,{value:n==null?void 0:n.id,label:"Program",onChange:u,disabled:l,children:a.map(r=>e.jsx(P,{value:r.id,children:r.name},r.id))})}const g={fieldsContainer:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},field:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"}};function U({predefinedProgram:n}){const[c,{}]=w(),[l,a]=p.useState(!1),[u,r]=p.useState(""),[d,s]=p.useState(null),t=async()=>{const f=n??d;if(f!==null)try{await c({name:u,programId:f.id}).unwrap()}catch(S){console.error("Failed to add new workspace:",S)}},o=async()=>{await t(),a(!1)},m=async()=>{a(!1)},i=async()=>{a(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:i,children:"Add Session"}),e.jsx(k,{open:l,setOpen:a,title:"Add Session",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:o,children:"Save"}),e.jsx(x,{onClick:m,children:"Close"})]}),children:e.jsxs("div",{style:g.fieldsContainer,children:[e.jsxs("div",{style:g.field,children:[e.jsx("div",{children:"Name"}),e.jsx(C,{autoFocus:!0,placeholder:"Enter session name",value:u,onInput:f=>r(f.target.value)})]}),e.jsxs("div",{style:g.field,children:[e.jsx("div",{children:"Program"}),e.jsx(b,{value:n??d,onChange:s,disabled:n!=null})]})]})})]})}function M({sessions:n,programs:c,workspaces:l}){const a=v(),u=y(),[r,d]=p.useState([]);return p.useEffect(()=>{const s=n.map(t=>{const o=c.find(i=>i.id===t.programId),m=l.find(i=>i.id===(o==null?void 0:o.workspaceId));return{session:t,program:o,workspace:m}});d(s)},[n,c,l]),n.length==0?e.jsx(h,{children:e.jsxs("div",{style:{color:a.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Session"}),e.jsx("div",{children:"Start by adding a session."})]})}):e.jsx(h,{children:e.jsx(I,{data:r,fields:["session","program","workspace","scan"],getId:s=>s.session.id,renderHeader:s=>{switch(s){case"session":return"Session";case"program":return"Program";case"workspace":return"Workspace";case"scan":return"Scan";default:return""}},cellHref:(s,t)=>t!="scan"?u(s.session):void 0,renderCell:(s,t)=>{var o,m;switch(t){case"session":return s.session.name;case"program":return((o=c.find(i=>i.id===s.program.id))==null?void 0:o.name)||"Unknown Program";case"workspace":return((m=l.find(i=>i.id===s.workspace.id))==null?void 0:m.name)||"Unknown Workspace";case"scan":return e.jsx(A,{session:s.session});default:return s.session[t]}}})})}export{U as A,M as S};
