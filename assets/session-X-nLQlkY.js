import{a as u,o as r,w as p}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{T as l,H as h,A as x}from"./Table-BXWMwxiq.js";import{B as f}from"./Breadcrumbs-CXa4b3a6.js";import{S as g}from"./ScanDialog-DOPPwSUr.js";import{S as c,T as d}from"./Title-Dqu7P7kl.js";import{A as j,e as C,J as S,K as k,E as w}from"./Link-CBdQB43h.js";import{f as b,D as A,I as v,a as D}from"./InviteUsersDialog-DIzJtx9o.js";import{L as I}from"./IconLink-C_mZnWoR.js";import"./index-OoWrCoTk.js";import"./icons-BfOLVJvM.js";import"./IconButton-DZWzrqxy.js";function T({records:n,invitees:s}){const[o,i]=u.useState(new Map);return u.useEffect(()=>{const e=new Map;s.forEach(t=>{e.set(t.user.id,t)}),i(e)},[s]),r.jsx(l,{data:n,fields:["user","state","createdAt"],getId:e=>e.id,renderHeader:e=>{switch(e){case"user":return"Invitee";case"state":return"State";case"createdAt":return"Created At";default:return""}},renderCell:(e,t)=>{var a;switch(t){case"user":return((a=o.get(e.userId))==null?void 0:a.user.email)||"";case"createdAt":return new Date(e.createdAt).toLocaleString();default:return e[t]}}})}function y({inviteeInsights:n,invitees:s}){const o=j(),i=C();return n.length==0?r.jsx(c,{children:r.jsxs("div",{style:{color:i.colors.hint,textAlign:"center"},children:[r.jsx("div",{children:"No Invitees"}),r.jsx("div",{children:"Start by inviting users."})]})}):r.jsx(c,{children:r.jsx(l,{data:n,fields:["user","badge","earliestCheckin","latestCheckout","duration"],getId:e=>e.user.id,renderHeader:e=>{switch(e){case"user":return"Invitee";case"badge":return"Badge";case"earliestCheckin":return"Earliest Check-in";case"latestCheckout":return"Latest Check-out";case"duration":return"Duration";default:return""}},renderCell:(e,t)=>{const a=s.find(m=>m.user.id===e.user.id);switch(t){case"user":return e.user.email;case"badge":return a?r.jsx(A,{id:a.badge.id,value:o(a.badge.signedValue),displaySize:32}):void 0;case"earliestCheckin":return e.earliestCheckin?new Date(e.earliestCheckin).toLocaleString():"-";case"latestCheckout":return e.latestCheckout?new Date(e.latestCheckout).toLocaleString():"-";case"duration":return b((e.totalDurationSeconds??0)*1e3);default:return e[t]}}})})}function B({sessionId:n}){var t,a;const{data:s=null}=S({sessionId:n,includeParents:!0}),{data:{inviteeInsights:o=[],records:i=[]}={}}=k(n),{data:e=[]}=w(((t=s==null?void 0:s.program)==null?void 0:t.id)||"",{skip:!((a=s==null?void 0:s.program)!=null&&a.id)});return s==null?r.jsx(I,{}):r.jsxs(r.Fragment,{children:[r.jsx(h,{children:r.jsx(f,{workspace:s.workspace,program:s.program,session:s.session})}),r.jsxs(x,{children:[r.jsx(g,{session:s.session}),r.jsx(v,{program:s.program}),r.jsx(D,{invitees:e})]}),r.jsx(d,{children:"Invitees"}),r.jsx(y,{inviteeInsights:o,invitees:e}),r.jsx(d,{children:"Records"}),r.jsx(T,{records:i,invitees:e})]})}const J=p(function({params:s}){return r.jsx(B,{sessionId:s.sessionId})});export{J as default};
