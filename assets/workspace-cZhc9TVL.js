import{a as x,o as e,w as k}from"./chunk-QMGIS6GS-DqORk8pi.js";import{L as D}from"./Loading-DDn8iYM2.js";import{u as C,a8 as A,a9 as T,i as W,aa as R,ab as L,ac as O,ad as F}from"./link-DrGoElNK.js";import{D as P,B as p,T as v,a as E,L as I}from"./Table-EEwtU7vo.js";import{F as z,I as N,a as B,b as U,M}from"./ManageLayout-Cs-pueXT.js";import{A as Q}from"./AddProgramDialog-YFt5Fj2F.js";import{R as G,F as w,a as S}from"./RadioGroup-CEiR-Mk4.js";import{W as $}from"./WorkspaceDialog-B9bu5-LN.js";import"./index-DiSreKSV.js";import"./ProgramDialog-CMQV7eY2.js";import"./Select-B1qhCRg0.js";import"./List-D1ON5E6J.js";const b={container:{width:"100%"},field:{marginBottom:"10px"}};function H({open:i,setOpen:l,workspace:n}){const a=C(),[c,{}]=A(),[t,h]=x.useState(""),[j,u]=x.useState("facilitator"),[y,d]=x.useState(""),m=r=>{l(r),d(""),h(""),u("facilitator")},g=async()=>{if(t==""){d("Please enter a valid email");return}try{await c({workspaceId:n.id,email:t,relationName:j}).unwrap()}catch(r){d(`Failed to add access: ${JSON.stringify(r)}`);return}m(!1)};return e.jsx(P,{open:i,setOpen:m,title:"Add Access",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:g,children:"Save"}),e.jsx(p,{onClick:()=>m(!1),children:"Close"})]}),children:e.jsxs("div",{style:b.container,children:[e.jsx("div",{style:b.field,children:e.jsxs(z,{variant:"standard",fullWidth:!0,children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(B,{id:"email",fullWidth:!0,autoFocus:!0,placeholder:"Enter email",value:t,onInput:r=>h(r.target.value)})]})}),e.jsx("div",{style:b.field,children:e.jsxs(z,{children:[e.jsx(U,{id:"demo-radio-buttons-group-label",children:"Role"}),e.jsxs(G,{id:"role","aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",value:j,onChange:r=>u(r.target.value),children:[e.jsx(w,{value:"facilitator",control:e.jsx(S,{}),label:"Facilitator"}),e.jsx(w,{value:"admin",control:e.jsx(S,{}),label:"Admin"})]})]})}),e.jsx("div",{style:{color:a.colors3.error,fontSize:a.font.sizes.lower2},children:y})]})})}function J({open:i,setOpen:l,workspace:n}){const[a,{}]=T();return e.jsx($,{open:i,setOpen:l,predefinedWorkspace:n,onSave:async({name:c})=>{await a({id:n.id,name:c}).unwrap()}})}const s={container:{width:"100%",display:"flex",flexDirection:"column"},titleRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"20px",marginLeft:"16px",marginRight:"16px"},title:{},actionbar:{display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center",gap:"5px"},detailsTable:{textAlign:"left",marginLeft:"16px",marginRight:"16px"},detailsLabel:{fontWeight:"bold"},section:{width:"100%",display:"flex",flexDirection:"column",marginTop:"30px",borderTop:"1px solid",paddingTop:"20px",minHeight:"100px"},sectionTitleRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"5px",marginLeft:"16px",marginRight:"16px"},sectionTitle:{fontWeight:"bold"},lastColumn:{display:"flex",flexDirection:"row",justifyContent:"end"}};function q({workspace:i,programs:l,organizers:n,resources:a,relationName:c}){const t=C(),h=W(),[j,u]=x.useState(!1),[y,d]=x.useState(!1),[m,g]=x.useState(!1),r={...s.section,borderColor:t.colors3.divider};return e.jsxs("div",{style:s.container,children:[e.jsxs("div",{style:s.titleRow,children:[e.jsx("div",{style:{...s.title,color:t.colors3.text1,fontSize:t.font.sizes.h1},children:i.name}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>u(!0),children:"Edit"}),e.jsx(J,{open:j,setOpen:u,workspace:i})]})]}),e.jsx("table",{style:s.detailsTable,children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{...s.detailsLabel,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Role"}),e.jsx("td",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:c})]})})}),e.jsxs("section",{style:r,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Subscription"}),e.jsx("div",{style:s.actionbar})]}),e.jsx("table",{style:s.detailsTable,children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Plan"}),e.jsx("td",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:"Free"})]})})})]}),e.jsxs("section",{style:r,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Usage"}),e.jsx("div",{style:s.actionbar})]}),e.jsx(v,{data:a,fields:["resource","usage"],getId:o=>o.name,renderCell:(o,f)=>{switch(f){case"resource":return e.jsx("div",{children:o.name});case"usage":return e.jsxs("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:[o.used," / ",o.limit]})}}})]}),e.jsxs("section",{style:r,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Programs"}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>d(!0),children:"Add"}),e.jsx(Q,{open:y,setOpen:d,predefinedWorkspace:i})]})]}),e.jsx(v,{data:l,fields:["program","scan"],getId:o=>o.id,renderCell:(o,f)=>{switch(f){case"program":return e.jsx(E,{href:h(o),style:{...s.program,color:t.colors3.text1,textDecorationColor:t.colors3.text1,textUnderlineOffset:t.font.sizes.textUnderlineOffset,fontSize:t.font.sizes.normal},children:o.name});case"role":return e.jsx("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:"Admin"})}}})]}),e.jsxs("section",{style:r,children:[e.jsxs("div",{style:s.sectionTitleRow,children:[e.jsx("div",{style:{...s.sectionTitle,color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Access"}),e.jsxs("div",{style:s.actionbar,children:[e.jsx(p,{onClick:()=>g(!0),children:"Add"}),e.jsx(H,{open:m,setOpen:g,workspace:i})]})]}),e.jsx(v,{data:n,fields:["user","role"],getId:o=>o.user.id,renderCell:(o,f)=>{switch(f){case"user":return e.jsxs("div",{children:[e.jsx("div",{style:{color:t.colors3.text1,fontSize:t.font.sizes.normal},children:o.user.name}),e.jsx("div",{style:{color:t.colors3.text2,fontSize:t.font.sizes.lower2},children:o.user.email})]});case"role":return e.jsx("div",{style:{...s.lastColumn,color:t.colors3.text1,fontSize:t.font.sizes.lower1},children:o.relationName})}}})]})]})}function K({workspaceId:i}){const{data:l}=R(i),{data:n=[]}=L(i),{data:a=[]}=O(i),{data:c=[]}=F(i);return l==null?e.jsx(D,{}):e.jsx(I,{currentPage:"manage",children:e.jsx(M,{currentPage:"workspaces",children:e.jsx(q,{workspace:l.workspace,programs:n,organizers:c,resources:a,relationName:l.relationName})})})}const ne=k(function({params:l}){return e.jsx(K,{workspaceId:l.workspaceId})});export{ne as default};
