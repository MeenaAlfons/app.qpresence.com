import{o as e,a as d}from"./chunk-QMGIS6GS-D-w4GL0C.js";import{Y as j,Z as k,e as w,k as y}from"./Link-BtxS3F1D.js";import{B as u,D as v,T as S}from"./Table-BnIuKFvj.js";import{S as C,M as P}from"./Select-fhDA4Kuw.js";import{I}from"./Input-BWAQQAEU.js";import{S as W}from"./Title-Zen3SAoM.js";function A({value:s,onChange:o,disabled:l=!1}){const{data:n=[]}=j(),r=a=>{const t=n.find(c=>c.id===a.target.value);if(!t){console.error("Workspace not found for id:",a.target.value);return}o(t)};return e.jsx(C,{value:s==null?void 0:s.id,label:"Workspace",onChange:r,disabled:l,children:n.map(a=>e.jsx(P,{value:a.id,children:a.name},a.id))})}const p={fieldsContainer:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},field:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center"}};function E({predefinedWorkspace:s}){const[o,{}]=k(),[l,n]=d.useState(!1),[r,a]=d.useState(""),[t,c]=d.useState(null),m=async()=>{const i=s??t;if(i!==null)try{await o({name:r,workspaceId:i.id}).unwrap()}catch(f){console.error("Failed to add new workspace:",f)}},g=async()=>{await m(),n(!1)},h=async()=>{n(!1)},x=async()=>{n(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:x,children:"Add Program"}),e.jsx(v,{open:l,setOpen:n,title:"Add Program",renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(u,{onClick:g,children:"Save"}),e.jsx(u,{onClick:h,children:"Close"})]}),children:e.jsxs("div",{style:p.fieldsContainer,children:[e.jsxs("div",{style:p.field,children:[e.jsx("div",{children:"Name"}),e.jsx(I,{autoFocus:!0,placeholder:"Enter program name",value:r,onInput:i=>a(i.target.value)})]}),e.jsxs("div",{style:p.field,children:[e.jsx("div",{children:"Workspace"}),e.jsx(A,{value:s??t,onChange:c,disabled:s!=null})]})]})})]})}function M({programs:s,workspaces:o}){const l=w(),n=y();return s.length==0?e.jsx(W,{children:e.jsxs("div",{style:{color:l.colors.hint,textAlign:"center"},children:[e.jsx("div",{children:"No Programs"}),e.jsx("div",{children:"Start by adding a program."})]})}):e.jsx(S,{data:s,fields:["program","workspace"],getId:r=>r.id,renderHeader:r=>{switch(r){case"program":return"Program";case"workspace":return"Workspace";default:return""}},rowHref:r=>n(r),renderCell:(r,a)=>{var t;switch(a){case"program":return r.name;case"workspace":return((t=o.find(c=>c.id===r.workspaceId))==null?void 0:t.name)||"Unknown Workspace";default:return r[a]}}})}export{E as A,M as P};
